import { cssifyMediaQueryRules, objectReduce, clusterCache, RULE_TYPE, KEYFRAME_TYPE, STATIC_TYPE, FONT_TYPE } from 'fela-utils';

export default function renderToString(renderer) {
  var _clusterCache = clusterCache(renderer.cache, renderer.mediaQueryOrder),
      fontFaces = _clusterCache.fontFaces,
      statics = _clusterCache.statics,
      keyframes = _clusterCache.keyframes,
      rules = _clusterCache.rules,
      mediaRules = _clusterCache.mediaRules;

  var basicCSS = fontFaces + statics + keyframes + rules;

  return objectReduce(mediaRules, function (css, rules, query) {
    return css + cssifyMediaQueryRules(query, rules);
  }, basicCSS);
}